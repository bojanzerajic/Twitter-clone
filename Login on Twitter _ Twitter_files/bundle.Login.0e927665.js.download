(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{"1cTF":function(e,t,n){"use strict";n.r(t),n.d(t,"LoginScreen",(function(){return se})),n.d(t,"styles",(function(){return ce}));n("IAdD");var r=n("KEM+"),a=n.n(r),i=n("ERkP"),o=n("pxuL"),s=n("zh9S"),c=n("RqPI"),l=n("oEGd"),d=n("hqKg"),p=n("3XMw"),h=n.n(p),u=n("aTAq"),m=n("G6rE");const g={BadSessionLoginVerification:h.a.f8ad0091,ExpiredLoginVerification:h.a.h2c7767e,OverLimitLoginVerificationAttempts:h.a.e83047c2,OfflineCodeSync:h.a.g4b108ee},b=Object(d.createSelector)((e,t)=>c.d(e)||(Object(u.a)(t.location.query.login_verification_error)?g[t.location.query.login_verification_error]:void 0),(e,t)=>t.location.query&&(Object(u.a)(t.location.query.username_or_email)?t.location.query.username_or_email:void 0),c.h,(e,t)=>!!t.location.pathname&&("/login/check"===t.location.pathname||"/login/check/"===t.location.pathname),(e,t)=>"true"===t.location.query.username_disabled,(e,t)=>"true"===t.location.query.email_disabled,(e,t)=>"true"===t.location.query.phone_disabled,m.e.selectLoggedInUser,(e,t,n,r,a,i,o,s)=>({errorMessage:e,loginId:t,loginReturnPath:n,loggedInUser:s,shouldChallenge:r,shouldDisableUsernameLogin:a,shouldDisableEmailLogin:i,shouldDisablePhoneLogin:o})),f={scribeAction:s.c,scribePageImpression:s.d};var y=Object(l.g)(b,f),_=n("7JQg"),v=(n("DZ+c"),n("MvUL"),n("kYxP"),n("SrtL")),w=n("GQKA"),E=n.n(w),S=n("8jkQ"),L=n("yoO3"),C="LoginPage_Continue_Button",x=n("sgih"),O=n("mw9i"),R=n("t62R"),k=n("oSwX"),I=n("jV+4"),j=n("/yvb"),P=n("Irs7");const A=h.a.d98c140e,D=h.a.e55188f0,U=h.a.d55d8fe1,T=h.a.c3d89aca,F=h.a.g806008e;class V extends i.Component{constructor(...e){super(...e),a()(this,"_handleContinuePress",()=>{const{analytics:e,history:t,location:n}=this.props,{query:r}=n,a=r&&r.redirect_after_login?r.redirect_after_login.toString():void 0,i=a&&S.b.makeSafeForTwitterRedirect(a);a&&i?(e.scribeAction("redirect"),window.location.assign(i)):(e.scribeAction("redirecthome"),t.replace("/home"))}),a()(this,"_handleSwitchAccountPress",()=>{const{analytics:e,history:t}=this.props;e.scribeAction("switch"),t.replace("/account/switch")})}render(){const{loggedInUser:e}=this.props;return i.createElement(L.a,null,i.createElement(v.a,{title:A}),i.createElement(x.a,{type:"full"},i.createElement(O.a,{style:[ce.root,ce.center],withGutter:!0},i.createElement(E.a,{style:ce.icon}),i.createElement(R.c,{accessibilityRole:"heading",align:"center",size:"xLarge",style:ce.heading,weight:"bold"},D),i.createElement(k.default,{size:"jumbo",uri:e.profile_image_url_https}),i.createElement(I.a,{badgeContext:"account",isProtected:e.protected,isVerified:e.verified,name:e.name,screenName:e.screen_name,style:[ce.gutter,ce.center],withStackedLayout:!0}),i.createElement(R.c,{align:"center",style:ce.gutter},U),i.createElement(j.a,{onPress:this._handleContinuePress,style:ce.gutter,testID:C,type:"primary"},T),i.createElement(R.c,{accessibilityRole:"link",align:"center",color:"link",onPress:this._handleSwitchAccountPress,style:ce.gutter},F))))}}var M=Object(P.a)(V,{page:"login",section:"continue"}),N=n("s9SB"),B=n.n(N),q=n("wrlS"),z=n("cnVF"),H=n("2qJZ"),G=n("6oVL"),W=n("Lam0"),X=n("mrHL"),J=n("Es6L"),Q=n("pjBI"),K=n("rHpw"),Z=n("XJCT");const Y=h.a.d1091f50,$=h.a.eab9ceb1,ee=h.a.g2b8acd4,te=h.a.bdc9d8a2,ne=h.a.c2ab20ab,re=h.a.id312f0a,ae=h.a.caac124e,ie=h.a.ab77e0b8,oe={page:"login"};class se extends i.Component{constructor(e,t){const{loginId:n}=e;super(e,t),a()(this,"_renderLogin",()=>{const{errorMessage:e,loginId:t,loginReturnPath:n,shouldChallenge:r,shouldDisableUsernameLogin:a,shouldDisableEmailLogin:o,shouldDisablePhoneLogin:s}=this.props,{autoSubmit:c,recaptchaSuccessToken:l,recaptchaTermAccepted:d,passwordValue:p,usernameValue:h}=this.state,u=!!l,m=r&&!u,g=!(r&&d),b=Object(H.c)()&&r;return i.createElement(L.a,null,i.createElement(v.a,{title:te}),i.createElement(O.a,{style:ce.root,withGutter:!0},i.createElement(E.a,{style:ce.icon}),i.createElement(R.c,{accessibilityRole:"heading",align:"center",size:"xLarge",style:ce.heading,weight:"bold"},ee),e?i.createElement(R.c,{color:"red"},e):null,g?this._renderAlternativeLoginMethodCopy():null,u?i.createElement(R.c,{style:ce.passedChallengeCopy},ne):null,i.createElement(G.a,{autoSubmit:c,deregisterServiceWorkerBeforeSubmit:b,hideSubmitButton:m,loginReturnPath:n,submitButtonDisabled:this._hasMissingFields(),submitButtonSize:"normalLarge",submitButtonStyle:ce.submitButton},i.createElement(Z.b,{autoFocus:!t,onChange:this._handleUsernameFieldChange,onSubmitEditing:this._handleSubmitEditing,value:h,withEmailDisabled:o,withPhoneDisabled:s,withUsernameDisabled:a}),m?null:i.createElement(Z.a,{autoFocus:!!t,onChange:this._handlePasswordFieldChange,onSubmitEditing:this._handleSubmitEditing,value:p}),r?i.createElement("input",{defaultValue:l,name:"g-recaptcha-response",style:{display:"none"}}):null),r&&!u?this._renderRecaptcha():null,i.createElement(R.c,{align:"center",style:ce.links},i.createElement(Q.a,null,i.createElement(R.c,{link:{pathname:"https://twitter.com/account/begin_password_reset",external:!0,openInSameFrame:!0}},Y),i.createElement(R.c,{link:"/i/flow/signup"},$)))))}),a()(this,"_renderAlternativeLoginMethodCopy",()=>{const{shouldDisableUsernameLogin:e,shouldDisableEmailLogin:t,shouldDisablePhoneLogin:n}=this.props;let r;return e?r=re:n?r=ie:t&&(r=ae),n||t||e?i.createElement(R.c,{color:"red"},r):null}),a()(this,"_renderRecaptcha",()=>{const{usernameValue:e}=this.state;return i.createElement(W.a,{nextButtonDisabled:!e,onChange:this._handleRecaptchaStateChange,onConsent:this._handleRecaptchaTermAccepted,withConsentForm:!0})}),a()(this,"_hasMissingFields",()=>{const{usernameValue:e,passwordValue:t}=this.state;return!e||!t}),a()(this,"_handlePasswordFieldChange",e=>{this.setState({passwordValue:e.target.value})}),a()(this,"_handleUsernameFieldChange",e=>{this.setState({usernameValue:e.target.value})}),a()(this,"_handleSubmitEditing",()=>{this._hasMissingFields()||this.setState({autoSubmit:!0})}),a()(this,"_handleRecaptchaStateChange",e=>{const{scribeAction:t}=this.props,n=e?"passed":"expired";t(Object.assign({},oe,{section:"recaptcha",action:n})),e&&this.setState({recaptchaSuccessToken:e})}),a()(this,"_handleRecaptchaTermAccepted",()=>{const{scribeAction:e}=this.props;e(Object.assign({},oe,{section:"recaptcha",component:"terms",action:"accepted"})),this.setState({recaptchaTermAccepted:!0})}),this._continueEnabled=q.a.isTrue("responsive_web_continue_as_always_enabled")||"true"===e.location.query.showContinuePrompt&&q.a.isTrue("responsive_web_continue_as_param_enabled"),this.state={autoSubmit:!1,recaptchaTermAccepted:!1,usernameValue:n||"",passwordValue:""}}UNSAFE_componentWillMount(){this._unsetFlashMessage(this.props)}componentDidMount(){const{errorMessage:e,scribeNamespace:t,scribePageImpression:n,shouldChallenge:r}=this.props;Object(J.a)()&&this.context.setSideNavSupport(!1),e&&n(Object.assign({},t,{section:"error"})),r&&n(Object.assign({},t,{section:"recaptcha"}))}UNSAFE_componentWillUpdate(e){this._unsetFlashMessage(e)}componentWillUnmount(){Object(J.a)()&&this.context.setSideNavSupport(!0)}render(){const{errorMessage:e,loggedInUser:t,history:n,location:r}=this.props;return this._continueEnabled&&t&&!e?i.createElement(M,{history:n,location:r,loggedInUser:t}):this._renderLogin()}_unsetFlashMessage(e){const{errorMessage:t}=e;t&&Object(X.b)(B.a.serialize(z.k,"",{expires:new Date(0),path:"/",domain:".twitter.com",secure:!0}))}}a()(se,"contextType",o.a);const ce=K.a.create(e=>({root:{marginTop:e.spaces.medium},links:{marginTop:e.spaces.medium},passedChallengeCopy:{marginVertical:e.spaces.small},submitButton:{marginVertical:e.spaces.xSmall,marginHorizontal:e.spaces.xSmall},icon:{color:e.colors.brandColor,height:e.spaces.xLarge},heading:{marginHorizontal:0,marginTop:e.spaces.large,marginBottom:e.spaces.xSmall},center:{flexDirection:"column",alignItems:"center"},gutter:{marginVertical:e.componentDimensions.gutterVertical}}));t.default=Object(_.c)(oe)(y(se))},"2qJZ":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return s}));var r=n("wrlS"),a=n("8jkQ");const i="twitter.com",o="mobile.twitter.com";function s(){if(r.a.isTrue("responsive_web_fake_root_twitter_domain_for_testing"))return!0;const e=a.b.get();return Boolean(e&&e.hostname===i)}},Lam0:function(e,t,n){"use strict";n.d(t,"a",(function(){return D}));var r=n("KEM+"),a=n.n(r),i=n("ERkP"),o=n.n(i),s=n("aWzz"),c=n.n(s);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var p=function(e){var t,n;function r(){var t;return(t=e.call(this)||this).handleExpired=t.handleExpired.bind(d(t)),t.handleErrored=t.handleErrored.bind(d(t)),t.handleRecaptchaRef=t.handleRecaptchaRef.bind(d(t)),t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.getValue=function(){return this.props.grecaptcha&&void 0!==this._widgetId?this.props.grecaptcha.getResponse(this._widgetId):null},a.getWidgetId=function(){return this.props.grecaptcha&&void 0!==this._widgetId?this._widgetId:null},a.execute=function(){var e=this.props.grecaptcha;if(e&&void 0!==this._widgetId)return e.execute(this._widgetId);this._executeRequested=!0},a.reset=function(){this.props.grecaptcha&&void 0!==this._widgetId&&this.props.grecaptcha.reset(this._widgetId)},a.handleExpired=function(){this.props.onExpired?this.props.onExpired():this.props.onChange&&this.props.onChange(null)},a.handleErrored=function(){this.props.onErrored&&this.props.onErrored()},a.explicitRender=function(){if(this.props.grecaptcha&&this.props.grecaptcha.render&&void 0===this._widgetId){var e=document.createElement("div");this._widgetId=this.props.grecaptcha.render(e,{sitekey:this.props.sitekey,callback:this.props.onChange,theme:this.props.theme,type:this.props.type,tabindex:this.props.tabindex,"expired-callback":this.handleExpired,"error-callback":this.handleErrored,size:this.props.size,stoken:this.props.stoken,hl:this.props.hl,badge:this.props.badge}),this.captcha.appendChild(e)}this._executeRequested&&this.props.grecaptcha&&void 0!==this._widgetId&&(this._executeRequested=!1,this.execute())},a.componentDidMount=function(){this.explicitRender()},a.componentDidUpdate=function(){this.explicitRender()},a.componentWillUnmount=function(){void 0!==this._widgetId&&(this.delayOfCaptchaIframeRemoving(),this.reset())},a.delayOfCaptchaIframeRemoving=function(){var e=document.createElement("div");for(document.body.appendChild(e),e.style.display="none";this.captcha.firstChild;)e.appendChild(this.captcha.firstChild);setTimeout((function(){document.body.removeChild(e)}),5e3)},a.handleRecaptchaRef=function(e){this.captcha=e},a.render=function(){var e=this.props,t=(e.sitekey,e.onChange,e.theme,e.type,e.tabindex,e.onExpired,e.onErrored,e.size,e.stoken,e.grecaptcha,e.badge,e.hl,function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["sitekey","onChange","theme","type","tabindex","onExpired","onErrored","size","stoken","grecaptcha","badge","hl"]));return o.a.createElement("div",l({},t,{ref:this.handleRecaptchaRef}))},r}(o.a.Component);p.displayName="ReCAPTCHA",p.propTypes={sitekey:c.a.string.isRequired,onChange:c.a.func,grecaptcha:c.a.object,theme:c.a.oneOf(["dark","light"]),type:c.a.oneOf(["image","audio"]),tabindex:c.a.number,onExpired:c.a.func,onErrored:c.a.func,size:c.a.oneOf(["compact","normal","invisible"]),stoken:c.a.string,hl:c.a.string,badge:c.a.oneOf(["bottomright","bottomleft","inline"])},p.defaultProps={onChange:function(){},theme:"light",type:"image",tabindex:0,size:"normal",badge:"bottomright"};var h=n("oXkQ"),u=n.n(h);function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var g={},b=0;function f(){return"undefined"!=typeof window&&window.recaptchaOptions||{}}var y,_,v="onloadcallback",w=f(),E=(y=function(){var e=f(),t=e.lang?"&hl="+e.lang:"";return"https://"+(e.useRecaptchaNet?"recaptcha.net":"www.google.com")+"/recaptcha/api.js?onload="+v+"&render=explicit"+t},_=(_={callbackName:v,globalName:"grecaptcha",removeOnUnmount:w.removeOnUnmount||!1})||{},function(e){var t=e.displayName||e.name||"Component",n=function(t){var n,r;function a(e,n){var r;return(r=t.call(this,e,n)||this).state={},r.__scriptURL="",r}r=t,(n=a).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;var o=a.prototype;return o.asyncScriptLoaderGetScriptLoaderID=function(){return this.__scriptLoaderID||(this.__scriptLoaderID="async-script-loader-"+b++),this.__scriptLoaderID},o.setupScriptURL=function(){return this.__scriptURL="function"==typeof y?y():y,this.__scriptURL},o.asyncScriptLoaderHandleLoad=function(e){var t=this;this.setState(e,(function(){return t.props.asyncScriptOnLoad&&t.props.asyncScriptOnLoad(t.state)}))},o.asyncScriptLoaderTriggerOnScriptLoaded=function(){var e=g[this.__scriptURL];if(!e||!e.loaded)throw new Error("Script is not loaded.");for(var t in e.observers)e.observers[t](e);delete window[_.callbackName]},o.componentDidMount=function(){var e=this,t=this.setupScriptURL(),n=this.asyncScriptLoaderGetScriptLoaderID(),r=_,a=r.globalName,i=r.callbackName,o=r.scriptId;if(a&&void 0!==window[a]&&(g[t]={loaded:!0,observers:{}}),g[t]){var s=g[t];return s&&(s.loaded||s.errored)?void this.asyncScriptLoaderHandleLoad(s):void(s.observers[n]=function(t){return e.asyncScriptLoaderHandleLoad(t)})}var c={};c[n]=function(t){return e.asyncScriptLoaderHandleLoad(t)},g[t]={loaded:!1,observers:c};var l=document.createElement("script");l.src=t,l.async=!0,o&&(l.id=o);var d=function(e){if(g[t]){var n=g[t].observers;for(var r in n)e(n[r])&&delete n[r]}};i&&"undefined"!=typeof window&&(window[i]=function(){return e.asyncScriptLoaderTriggerOnScriptLoaded()}),l.onload=function(){var e=g[t];e&&(e.loaded=!0,d((function(t){return!i&&(t(e),!0)})))},l.onerror=function(){var e=g[t];e&&(e.errored=!0,d((function(t){return t(e),!0})))},document.body.appendChild(l)},o.componentWillUnmount=function(){var e=this.__scriptURL;if(!0===_.removeOnUnmount)for(var t=document.getElementsByTagName("script"),n=0;n<t.length;n+=1)t[n].src.indexOf(e)>-1&&t[n].parentNode&&t[n].parentNode.removeChild(t[n]);var r=g[e];r&&(delete r.observers[this.asyncScriptLoaderGetScriptLoaderID()],!0===_.removeOnUnmount&&delete g[e])},o.render=function(){var t=_.globalName,n=this.props,r=(n.asyncScriptOnLoad,n.forwardedRef),a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(n,["asyncScriptOnLoad","forwardedRef"]);return t&&"undefined"!=typeof window&&(a[t]=void 0!==window[t]?window[t]:void 0),a.ref=r,Object(i.createElement)(e,a)},a}(i.Component),r=Object(i.forwardRef)((function(e,t){return Object(i.createElement)(n,m({},e,{forwardedRef:t}))}));return r.displayName="AsyncScriptLoader("+t+")",r.propTypes={asyncScriptOnLoad:c.a.func},u()(r,e)})(p),S=n("3xO4"),L=n.n(S),C=n("t62R"),x=n("/yvb"),O=n("rHpw"),R=n("3XMw"),k=n.n(R);const I=k.a.c1df579e,j=k.a.b60eba9e,P=k.a.ba939777,A=k.a.bc6efc72;class D extends i.Component{constructor(e,t){super(e,t),a()(this,"_handlePass",e=>{const{onChange:t}=this.props;t&&setTimeout(()=>t(e),1e3)}),a()(this,"_handleConsent",()=>{const{onConsent:e}=this.props;this.setState({termsAccepted:!0}),e&&e()}),this.state={termsAccepted:!1}}_renderConsentForm(){const{nextButtonDisabled:e}=this.props;return i.createElement(L.a,null,i.createElement(C.c,{style:U.guideCopy},j),i.createElement(L.a,{style:U.button},i.createElement(x.a,{disabled:e,onPress:this._handleConsent,size:"normalLarge",type:"secondary"},I)),i.createElement(C.c,{color:"deepGray"},i.createElement(k.a.I18NFormatMessage,{$i18n:"hc37d3ba"},i.createElement(C.c,{link:"https://policies.google.com/privacy"},A))))}_renderRecaptcha(){const{withConsentForm:e}=this.props;return i.createElement(i.Fragment,null,e?i.createElement(L.a,{style:U.recaptchaTitle},i.createElement(C.c,{style:U.guideCopy},P)):null,i.createElement(L.a,{style:U.container},i.createElement(E,{onChange:this._handlePass,sitekey:"6LfOP30UAAAAAFBC4jbzu890rTdXBXBNHx9eVZEX"})))}render(){const{withConsentForm:e}=this.props,{termsAccepted:t}=this.state;return e&&!t?this._renderConsentForm():this._renderRecaptcha()}}const U=O.a.create(e=>({container:{margin:"auto",transitionProperty:"opacity",transitionDelay:"2s"},button:{paddingVertical:e.spaces.medium},guideCopy:{paddingTop:e.spaces.xSmall},recaptchaTitle:{paddingBottom:e.spaces.medium}}))}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web/bundle.Login.0e927665.js.map